"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.set = exports.Data = void 0;
class Data {
    collection;
    filter;
    data;
    constructor(collection, filter, data) {
        this.collection = collection;
        this.filter = filter;
        this.data = data;
    }
    set(key, value) {
        this.collection.database.client
            .db(this.collection.database.name)
            .collection(this.collection.collection.collectionName)
            .updateOne(this.filter, set(this.collection.database.client
            .db(this.collection.database.name)
            .collection(this.collection.collection.collectionName)
            .findOne(this.filter), key, value, this.collection.database.separator));
    }
}
exports.Data = Data;
function set(data, path, value, separator = ".") {
    if (path.includes(separator)) {
        let elements = path.split(separator), key = elements.pop(), object = elements.reduce((a, b) => {
            if (typeof a[b] === "undefined")
                a[b] = {};
            if (typeof a[b] !== "object")
                a[b] = {};
            return a[b];
        }, data);
        object[key] = value;
        return data;
    }
    else {
        data[path] = value;
        return data;
    }
}
exports.set = set;
//# sourceMappingURL=Data.js.map