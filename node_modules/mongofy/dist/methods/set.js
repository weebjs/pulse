"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.set = void 0;
const base_1 = require("../base");
async function set(self, key, value) {
    if (!key)
        throw new Error("[mongofy] Enter the name of the key");
    if (!value && value !== 0)
        throw new Error("[mongofy] Enter the name of the value");
    const data = await self.collection.findOne(self.filter);
    if (data) {
        await self.collection.updateOne(self.filter, {
            $set: (0, base_1.set)(data, key, value, self.separator),
        });
    }
    else {
        await self.collection.insertOne((0, base_1.set)(self.filter, key, value, self.separator));
    }
    return self.get(key);
}
exports.set = set;
//# sourceMappingURL=set.js.map